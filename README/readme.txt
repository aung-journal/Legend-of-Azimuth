If you want to understand this code, simply go to the game state and go in order as the keys from the gStateMachine class in main.lua.
Go through the classes, you encounter in the states and you will finally understand it. If you don't understand specific function go check documentation.
